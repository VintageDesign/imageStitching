import pytest
import ransac as rn
import numpy as np

match1l = [(1092.183837890625, 853.7752685546875), (660.028076171875, 758.4589233398438), (1281.1529541015625, 343.7947082519531), (532.8238525390625, 688.1666259765625)]
match1r = [(1883.947265625, 839.6972045898438), (1452.0703125, 744.1082153320312), (2077.43603515625, 325.6315612792969), (1326.53662109375, 674.3931274414062)]
ans1 = np.reshape([.0947890104, -.00000347519559, 808.252761, -.0158891884, .0983631042, -.767619865, -.0000210778695, .00000182966520, 1.00000000], (3,3))

ans2 = np.reshape([ .937084236, -.00770557503,  812.934354, -.0190458023,  .974520368,  3.90652702, -.0000239529658, -.00000312357237,  1.00000000], (3,3))
match2l = [(410.07818603515625, 635.8060913085938), (647.446044921875, 566.640380859375), (782.3014526367188, 419.570556640625), (1132.2030029296875, 1010.1979370117188)]
match2r = [(1206.5606689453125, 623.0596923828125), (1440.1629638671875, 553.3386840820312), (1574.3477783203125, 406.0274658203125), (1924.3804931640625, 996.9850463867188)]

ans3 = np.reshape([ .949341489,  .00427252148,  806.071557, -.0162162397,  .985995762, -1.12087307, -.0000210159026,  .00000329789714,  1.00000000], (3,3))
match3l = [(1226.177001953125, 383.9251708984375), (781.3949584960938, 443.0159606933594), (1123.8994140625, 991.2728881835938), (618.127685546875, 871.2716064453125)]
match3r = [(2021.3006591796875, 366.52471923828125), (1573.3128662109375, 429.4444885253906), (1916.2684326171875, 977.9464111328125), (1410.8824462890625, 856.591796875)]

ans4 = np.reshape([ .950818945,  .00126976874,  806.873364, -.0156713234,  .986049943, -1.59223174, -.0000202314399,  .00000264205453,  1.00000000], (3,3))
match4l = [(981.9266357421875, 841.3993530273438), (780.8423461914062, 448.7953186035156), (1191.7843017578125, 741.1649169921875), (1279.4105224609375, 451.46331787109375)]
match4r = [(1772.854248046875, 827.2769165039062), (1572.8653564453125, 435.0625915527344), (1984.958984375, 726.6543579101562), (2075.173583984375, 434.2452697753906)]

ans5 = np.reshape([ .951226482, -.00223909176,  806.969830, -.0158094636,  .983001045, -.422786277, -.0000199926634,  .000000417320974,  1.00000000e+00], (3,3))
match5l = [(716.2276000976562, 452.69146728515625), (1101.726806640625, 993.9178466796875), (831.8926391601562, 303.9850769042969), (1340.210693359375, 283.180908203125)]
match5r = [(1508.5675048828125, 439.4599609375), (1893.6612548828125, 980.3692016601562), (1624.4183349609375, 290.0299987792969), (2138.21923828125, 263.7933349609375)]

ans6 = np.reshape([ .940287558, -.000601820060,  810.933285, -.0185216745,  .981280285,  1.64164768, -.0000234528413,  .00000108872770,  1.00000000], (3,3))
match6l = [(366.706298828125, 891.0513305664062), (1182.1109619140625, 736.4375610351562), (1013.3613891601562, 544.14501953125), (627.0460205078125, 954.373779296875)]
match6r = [(1164.088623046875, 875.904052734375), (1975.1905517578125, 721.8318481445312), (1805.2923583984375, 529.0923461914062), (1419.36083984375, 939.374267578125)]

def test1():
  ans = rn.calc_h(match1l, match1r)
  assert ans.all() == ans1.all()

def test2():
  ans = rn.calc_h(match2l, match2r)
  assert ans.all() == ans2.all()

def test3():
  ans = rn.calc_h(match3l, match3r)
  assert ans.all() == ans3.all()

def test4():
  ans = rn.calc_h(match4l, match4r)
  assert ans.all() == ans4.all()

def test5():
  ans = rn.calc_h(match5l, match5r)
  assert ans.all() == ans5.all()

def test6():
  ans = rn.calc_h(match6l, match6r)
  assert ans.all() == ans6.all()
